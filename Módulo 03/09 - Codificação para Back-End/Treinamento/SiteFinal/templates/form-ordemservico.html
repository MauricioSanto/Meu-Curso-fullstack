{% extends "base.html" %}
{% comment %} {% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Formulário Ordem de Serviço</title>
    </head>
    <body>
        <a href="{% url "pg_inicial" %}">
            <button>Voltar</button>
        </a>
        <h2>Formulário Ordem de Serviço</h2>

        <form method="post">
            {% csrf_token %}
            {{ form_ordemservico.as_p }}
            <button type="submit">Salvar</button>
            <a href="{% url "pg_inicial" %}">
                <button type="button">Cancelar</button>
            </a>
        </form>

    </body>
</html> {% endcomment %}

{% load static %}

{%block titulo%}
    <a href="{% url "pg_inicial" %}">
        <button>Voltar</button>
    </a>

    <h2>Formulário Ordem de Serviços</h2>
{%endblock%}

{%block conteudo%}
    <form method="post">
        {% csrf_token %}
            
        <p>
        <label for="id_cliente">Cliente:</label>
        <select name="cliente" id="cliente">
            <option value="" selected=""></option>
            {% for cliente in clientes %}
                <option value="{{ cliente.id }}">{{ cliente.nome }}</option>
            {% endfor %}
        </select>
        </p>
                
        <p>
        <label for="id_servico">Serviço:</label>
        <select name="servico" required="" id="servico">
            <option value="" selected=""></option>
            {% for servico in servicos %}
                <option value="{{ servico.id }}">{{ servico.tipo }}</option>
            {% endfor %}
        </select>
        </p>
        <p>
            <label for="id_empresa">Empresa:</label>
            <select name="empresa" required="" id="empresa">
                <option value="" selected=""></option>
                {% for empresa in empresas %}
                    <option value="{{ empresa.id }}">{{ empresa.razao_social }}</option>
                {% endfor %}
            </select>
        </p>
        <p>
            <label for="data">Data servico:</label>
            <input type="date" name="data" maxlength="100"  id="data">
        </p>
        <button type="submit">Salvar</button>
        <a href="{% url "pg_inicial" %}">
            <button type="button">Cancelar</button>
        </a>

    </form>    

    <h2>Lista de Ordem de Serviços</h2>
    <table class="table">
        <thead>
            <tr>
            <th scope="col">ID</th>
            <th scope="col">Nome Cliente</th>
            <th scope="col">Tipo Serviço</th>
            <th scope="col">Empresa</th>
            <th scope="col">Data Inicial</th>
            <th scope="col">Data Final</th>
            <th scope="col">Opções</th>
            </tr>
        </thead>
        <tbody>

            {% for os in ordemservicos %}
                <tr>
                    <th scope="row">{{os.id}}</th>
                    <td>{{ os.cliente.nome }}</td>
                    <td>{{ os.empresa.razao_social}}</td>
                    <td>{{ os.servico.tipo }}</td>
                    <td>{{ os.data }}</td>
                    <td>{{ os.data_finalizacao}}</td>
                
                    <div class="btns_formulario">
                        {% comment %} <a href="{% url "pg_editar_ordemservico" os.id %}"> {% endcomment %}
                            <span>Editar Ordem de Serviços:</span>
                        </a>
                        <a href="{% url "pg_excluir_ordemservico" os.id %}"onclick=" return confirm('Deseja realmente excluir?')">
                            <span>Excluir Ordem de Serviços:</span>
                        </a>
                    </div>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <script src="{% static 'js/validacoes_ordemservicos.js'%}"></script>
{%endblock%}